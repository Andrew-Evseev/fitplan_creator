# Техническое задание: FitPlan Creator

## 1. Общая информация

### 1.1. Назначение продукта
**FitPlan Creator** — SaaS веб-приложение для создания индивидуальных планов тренировок на основе персональных параметров пользователя.

### 1.2. Целевая аудитория
- Люди, начинающие заниматься фитнесом
- Пользователи с ограничениями по здоровью
- Пользователи с ограниченным доступом к оборудованию
- Люди, желающие получить персонализированный план без консультации тренера

### 1.3. Основная ценность продукта
1. **Индивидуальный подход** — план создается на основе множества персональных параметров
2. **Объяснение выбора** — пользователь понимает, почему выбран именно такой план
3. **Полная информация** — детальная информация об упражнениях без необходимости искать в других источниках
4. **Безопасность** — учет ограничений по здоровью и противопоказаний

---

## 2. Функциональные требования

### 2.1. Сбор данных пользователя (Анкета)

#### 2.1.1. Базовые параметры
- ✅ **Пол/Гендер**: Мужской, Женский, Другой
- ✅ **Возраст**: от 10 до 100 лет
- ✅ **Рост**: в см (100-250 см)
- ✅ **Вес**: в кг (30-300 кг)
- ⚠️ **Целевой вес**: опционально (для расчета дефицита/профицита калорий)

#### 2.1.2. Цели и активность
- ✅ **Цель тренировок**:
  - Похудение
  - Набор мышечной массы
  - Развитие выносливости
  - Увеличение силы
  - Общая физическая форма
- ✅ **Уровень ежедневной активности**:
  - Сидячий образ жизни
  - Легкая активность
  - Умеренная активность
  - Высокая активность
  - Очень высокая активность

#### 2.1.3. Опыт и телосложение
- ✅ **Уровень подготовки**:
  - Новичок (менее 6 месяцев)
  - Средний (6 месяцев - 2 года)
  - Опытный (более 2 лет)
- ✅ **Тип телосложения**:
  - Эктоморф
  - Мезоморф
  - Эндоморф

#### 2.1.4. Место тренировок и оборудование
- ✅ **Место тренировок**:
  - Тренажёрный зал
  - Домашние тренировки
  - Уличная площадка
  - Только с весом тела
- ✅ **Доступное оборудование**: выбор из списка в зависимости от места тренировок
  - Для зала: штанга, гантели, скамья, турник, брусья, тренажёры и т.д.
  - Для дома: гантели, эспандеры, гиря, фитбол, скакалка, коврик, TRX и т.д.
  - Для улицы: турники, брусья, рукоход, шведская стенка и т.д.

#### 2.1.5. Ограничения по здоровью
- ✅ **Проблемы со здоровьем** (множественный выбор):
  - Проблемы со спиной
  - Проблемы с коленями
  - Проблемы с плечами
  - Проблемы с шеей
  - Проблемы с запястьями
  - Проблемы с локтями
  - Проблемы с тазобедренными суставами
  - Высокое давление
  - Проблемы с сердцем
  - Нет ограничений

#### 2.1.6. Предпочтения
- ✅ **Любимые группы мышц**: множественный выбор
- ✅ **Нелюбимые упражнения**: текстовый ввод через запятую

#### 2.1.7. График тренировок
- ✅ **Количество тренировок в неделю**: 2-7 дней
- ✅ **Длительность тренировки**: 30, 45, 60, 75, 90 минут
- ✅ **Рекомендуемая система тренировок**: автоматический подбор на основе параметров

---

### 2.2. Генерация плана тренировок

#### 2.2.1. Алгоритм генерации
- ✅ **Выбор системы тренировок** на основе:
  - Уровня подготовки
  - Цели тренировок
  - Количества дней в неделю
  - Места тренировок
- ✅ **Адаптация системы** под пользователя:
  - Учет ограничений по здоровью
  - Фильтрация по доступному оборудованию
  - Учет предпочтений (любимые группы мышц, нелюбимые упражнения)
- ✅ **Создание тренировок**:
  - Распределение по дням недели
  - Подбор упражнений под фокус дня
  - Адаптация параметров (подходы, повторения, отдых) под уровень подготовки и цель

#### 2.2.2. Системы тренировок
- ✅ **Full Body** (Фулбади) — для начинающих
- ✅ **Split** (Сплит) — для среднего и опытного уровня
- ✅ **PPL** (Push-Pull-Legs) — для максимального набора массы
- ✅ **Upper/Lower** (Верх/Низ) — сбалансированное развитие
- ✅ **Circuit** (Круговая) — для выносливости и жиросжигания
- ✅ **Cardio** — кардио тренировки

#### 2.2.3. Структура плана
- ✅ **Название плана**: генерируется на основе системы и цели
- ✅ **Описание плана**: краткое описание подхода
- ✅ **Список тренировок**: по дням недели
- ✅ **Каждая тренировка содержит**:
  - Название/день недели
  - Список упражнений
  - Параметры каждого упражнения (подходы, повторения, отдых)
  - Длительность тренировки
  - Фокус тренировки (группы мышц)

---

### 2.3. Объяснение выбора плана (КРИТИЧНО ВАЖНО)

#### 2.3.1. Что должно быть объяснено
- ⚠️ **Почему выбрана именно эта система тренировок**:
  - Связь с уровнем подготовки пользователя
  - Соответствие цели тренировок
  - Соответствие количеству дней в неделю
  - Соответствие месту тренировок
- ⚠️ **Почему выбраны именно эти упражнения**:
  - Соответствие цели (набор массы/похудение/сила)
  - Учет ограничений по здоровью
  - Учет доступного оборудования
  - Учет предпочтений пользователя
- ⚠️ **Почему выбраны именно эти параметры** (подходы/повторения/отдых):
  - Соответствие уровню подготовки
  - Соответствие цели тренировок
  - Соответствие типу телосложения

#### 2.3.2. Где должно отображаться объяснение
- ⚠️ **На странице плана**: отдельный блок с объяснением выбора системы
- ⚠️ **Для каждой тренировки**: краткое объяснение фокуса дня
- ⚠️ **Для каждого упражнения**: при нажатии показывать, почему выбрано именно это упражнение

#### 2.3.3. Формат объяснения
- Текстовое описание с конкретными причинами
- Связь с параметрами из анкеты
- Пример: "Выбрана система Full Body, так как вы новичок и тренируетесь 3 раза в неделю. Это оптимально для развития общей силы и мышечной массы на начальном этапе."

**Статус**: ⚠️ Частично реализовано (есть TrainingSystemInfoCard с описанием системы, но нет детального объяснения почему выбран именно этот план)

---

### 2.4. Информация об упражнениях

#### 2.4.1. Базовая информация
- ✅ **Название упражнения**
- ✅ **Описание**: краткое описание что это за упражнение
- ✅ **Техника выполнения**: пошаговая инструкция
- ✅ **Задействованные мышцы**:
  - ✅ Основные группы мышц (primaryMuscleGroups)
  - ✅ Вспомогательные группы мышц (secondaryMuscleGroups)
- ✅ **Оборудование**: список необходимого оборудования
- ✅ **Сложность**: Начинающий, Средний, Продвинутый

#### 2.4.2. Противопоказания (КРИТИЧНО ВАЖНО)
- ✅ **Хранение данных**: противопоказания хранятся в модели Exercise (contraindications)
- ⚠️ **Отображение в UI**: НЕ отображаются в интерфейсе при просмотре упражнения
- ⚠️ **Требуется**: добавить блок "Противопоказания" в детальный просмотр упражнения
- ⚠️ **Визуальное выделение**: если у пользователя есть ограничения по здоровью, которые совпадают с противопоказаниями упражнения, должно быть предупреждение

**Статус**: ⚠️ Данные есть, но не отображаются в UI

#### 2.4.3. Дополнительная информация
- ✅ **Параметры выполнения**: подходы, повторения, отдых
- ✅ **Категория упражнения**: разминка, основное, заминка
- ✅ **Тип**: с весом тела / с оборудованием
- ⚠️ **Видео/изображения**: поля есть в модели, но не используются в UI

---

### 2.5. Управление планом

#### 2.5.1. Просмотр плана
- ✅ Отображение всех тренировок по дням недели
- ✅ Раскрывающиеся карточки тренировок
- ✅ Прогресс выполнения тренировок
- ✅ Прогресс выполнения упражнений (отметка подходов)

#### 2.5.2. Редактирование плана
- ✅ **Редактирование упражнений**:
  - Изменение количества подходов
  - Изменение количества повторений
  - Изменение времени отдыха
- ✅ **Замена упражнений**:
  - Поиск альтернативных упражнений
  - Фильтрация по группе мышц
  - Фильтрация по оборудованию
- ✅ **Перестановка упражнений**: drag-and-drop для изменения порядка

#### 2.5.3. Перегенерация плана
- ✅ Возможность создать новый план на основе тех же предпочтений
- ✅ Предупреждение о потере текущего прогресса

#### 2.5.4. Экспорт плана
- ⚠️ **Текущий статус**: есть кнопка экспорта, но функционал не реализован (TODO в коде)
- ⚠️ **Требуется**: реализовать экспорт в текстовый формат с возможностью копирования

---

### 2.6. Отслеживание прогресса

#### 2.6.1. Отметка выполнения
- ✅ Отметка выполненных подходов
- ✅ Отметка завершенных тренировок
- ✅ Визуальные индикаторы прогресса

#### 2.6.2. Статистика
- ✅ Общий прогресс плана (процент выполнения)
- ✅ Количество выполненных тренировок
- ✅ Статистика по группам мышц
- ✅ Среднее время тренировки
- ✅ Максимальный стрик (серия дней подряд)

---

## 3. Технические требования

### 3.1. Платформа
- ✅ **Веб-приложение**: Flutter Web
- ✅ **Адаптивность**: поддержка различных размеров экранов
- ✅ **Браузерная совместимость**: современные браузеры (Chrome, Firefox, Safari, Edge)

### 3.2. Архитектура
- ✅ **State Management**: Riverpod
- ✅ **Навигация**: GoRouter
- ✅ **Хранение данных**: SharedPreferences (локальное хранение)
- ⚠️ **Backend**: отсутствует (все данные хранятся локально)

### 3.3. Производительность
- ✅ Кэширование сгенерированных планов
- ✅ Кэширование упражнений по оборудованию
- ✅ Оптимизация загрузки данных

---

## 4. UI/UX требования

### 4.1. Дизайн
- ✅ Современный Material Design 3
- ✅ Зеленая цветовая схема (фитнес-тематика)
- ✅ Адаптивная типографика
- ✅ Понятная иконография

### 4.2. Навигация
- ✅ Onboarding для новых пользователей
- ✅ Пошаговая анкета с индикатором прогресса
- ✅ Понятная навигация между экранами

### 4.3. Обратная связь
- ✅ Визуальные индикаторы загрузки
- ✅ Сообщения об успешных действиях
- ✅ Сообщения об ошибках
- ✅ Подтверждения для важных действий

---

## 5. Чеклист готовности функционала

### 5.1. ✅ Реализовано полностью

- [x] Сбор данных пользователя (анкета из 7 шагов)
- [x] Генерация плана тренировок на основе параметров
- [x] Выбор системы тренировок
- [x] Фильтрация упражнений по оборудованию
- [x] Учет ограничений по здоровью при подборе упражнений
- [x] Отображение информации об упражнениях (название, описание, техника)
- [x] Отображение задействованных мышц
- [x] Редактирование параметров упражнений
- [x] Замена упражнений
- [x] Перестановка упражнений (drag-and-drop)
- [x] Отслеживание прогресса выполнения
- [x] Статистика тренировок
- [x] Onboarding для новых пользователей
- [x] Улучшенные пустые состояния

### 5.2. ⚠️ Частично реализовано / Требует доработки

- [ ] **Объяснение выбора плана**:
  - [x] Есть описание системы тренировок
  - [ ] Нет детального объяснения почему выбрана именно эта система
  - [ ] Нет объяснения почему выбраны конкретные упражнения
  - [ ] Нет объяснения почему выбраны конкретные параметры (подходы/повторения)

- [ ] **Противопоказания упражнений**:
  - [x] Данные хранятся в модели Exercise
  - [x] Есть проверка безопасности упражнений
  - [ ] НЕ отображаются в UI при просмотре упражнения
  - [ ] Нет предупреждений при совпадении ограничений пользователя с противопоказаниями

- [ ] **Экспорт плана**:
  - [x] Есть кнопка экспорта
  - [ ] Функционал не реализован (TODO в коде)
  - [ ] Нет копирования в буфер обмена

- [ ] **Визуализация упражнений**:
  - [x] Есть поля imageUrl и videoUrl в модели
  - [ ] Не используются в UI

### 5.3. ❌ Не реализовано (но может быть полезно)

- [ ] История тренировок (детальная)
- [ ] Сравнение результатов
- [ ] Графики прогресса
- [ ] Таймер отдыха между подходами
- [ ] Отслеживание весов для упражнений
- [ ] Рекомендации по прогрессии нагрузок
- [ ] Экспорт в PDF
- [ ] Печать плана
- [ ] Темная тема (есть в коде, но не переключается)

---

## 6. Приоритетные задачи для доработки

### 6.1. Критично важно (MVP)

1. **Добавить объяснение выбора плана**
   - Создать компонент с детальным объяснением почему выбрана система
   - Добавить объяснение для каждого упражнения
   - Показывать связь с параметрами из анкеты

2. **Отобразить противопоказания упражнений**
   - Добавить блок "Противопоказания" в детальный просмотр упражнения
   - Выделять предупреждения если есть совпадения с ограничениями пользователя
   - Показывать альтернативные упражнения при наличии противопоказаний

3. **Реализовать экспорт плана**
   - Реализовать генерацию текстового формата плана
   - Добавить копирование в буфер обмена
   - Форматировать текст для удобного чтения

### 6.2. Важно (улучшение UX)

4. **Улучшить отображение информации об упражнениях**
   - Добавить отображение вторичных групп мышц
   - Добавить визуализацию задействованных мышц (схема/иконки)
   - Показывать видео/изображения если они есть

5. **Добавить объяснение параметров упражнений**
   - Объяснять почему выбрано именно такое количество подходов/повторений
   - Объяснять время отдыха между подходами

### 6.3. Желательно (дополнительные функции)

6. История тренировок
7. Графики прогресса
8. Таймер отдыха
9. Отслеживание весов

---

## 7. Дополнительные требования

### 7.1. Безопасность
- ✅ Фильтрация упражнений по ограничениям здоровья
- ✅ Проверка безопасности перед добавлением упражнения в план
- ⚠️ Рекомендуется добавить предупреждения о необходимости консультации с врачом

### 7.2. Доступность
- ✅ Понятные названия и описания
- ✅ Визуальные индикаторы
- ⚠️ Можно улучшить: добавить поддержку screen readers

### 7.3. Локализация
- ✅ Весь интерфейс на русском языке
- ⚠️ Можно добавить: поддержку других языков в будущем

---

## 8. Метрики успеха

### 8.1. Функциональные метрики
- ✅ План генерируется успешно для всех комбинаций параметров
- ✅ Все упражнения соответствуют ограничениям пользователя
- ✅ Все упражнения соответствуют доступному оборудованию
- ⚠️ Пользователь понимает почему выбран план (требует доработки)

### 8.2. UX метрики
- ✅ Анкета заполняется за 5-10 минут
- ✅ План генерируется быстро (< 3 секунд)
- ✅ Интерфейс интуитивно понятен
- ✅ Пользователь может найти всю необходимую информацию об упражнениях

---

## 9. Заключение

### Текущий статус проекта
**Готовность MVP: ~75%**

**Сильные стороны:**
- Полная анкета с учетом всех необходимых параметров
- Интеллектуальная генерация планов
- Хороший UI/UX
- Учет ограничений по здоровью и оборудованию

**Что нужно доработать для полноценного MVP:**
1. Добавить объяснение выбора плана (критично)
2. Отобразить противопоказания упражнений (критично)
3. Реализовать экспорт плана (важно)

После реализации этих трех пунктов приложение будет полностью соответствовать заявленной концепции: **индивидуальный план с объяснением выбора и полной информацией об упражнениях**.

---

**Дата создания ТЗ**: 2024
**Версия**: 1.0
**Статус**: Актуально
